(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{40:function(e,n,t){"use strict";t.r(n);var c=t(1),o=t.n(c),r=t(16),u=t.n(r),a=(t(7),t(6)),i=t(3),s=t(0),l=function(e){var n=e.person,t=e.delPerson;return Object(s.jsxs)("div",{children:[n.name," ",n.number," ",Object(s.jsx)("button",{onClick:function(){return t({person:n})},children:" Delete "})]})},d=function(e){var n=e.onChange;return Object(s.jsxs)("div",{children:["filter shown with: ",Object(s.jsx)("input",{onChange:n})]})},f=function(e){var n=e.name,t=e.onChange;return Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:n,onChange:t})]})},j=function(e){var n=e.message;return null===n?null:n?Object(s.jsx)("div",{className:"error",children:n}):void 0},b=function(e){var n=e.number,t=e.onChange;return Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:n,onChange:t})]})},h=function(e){var n=e.message;return null===n?null:n?Object(s.jsx)("div",{className:"notification",children:n}):void 0},m=t(4),O=t.n(m),v="/api/persons",g=function(){return O.a.get(v).then((function(e){return e.data}))},p=function(e){return O.a.post(v,e).then((function(e){return e.data}))},x=function(e,n){return O.a.put("".concat(v,"/").concat(e),n).then((function(e){return e.data}))},w=function(e){return O.a.delete("".concat(v,"/").concat(e)).then((function(e){return e.data}))},C=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],r=Object(c.useState)(""),u=Object(i.a)(r,2),m=u[0],O=u[1],v=Object(c.useState)(""),C=Object(i.a)(v,2),S=C[0],y=C[1],T=Object(c.useState)(""),k=Object(i.a)(T,2),P=k[0],D=k[1],F=Object(c.useState)(null),L=Object(i.a)(F,2),I=L[0],N=L[1],B=Object(c.useState)(null),E=Object(i.a)(B,2),J=E[0],A=E[1];Object(c.useEffect)((function(){console.log("effect"),g().then((function(e){o(e)}))}),[]);var M=function(e,n){return e.map((function(e){return e.name})).includes(n)},q=function(e){var n=e.person;window.confirm("Do you really want to delete ".concat(n.name,"?"))&&(console.log(n),w(n.id).then((function(){o(t.filter((function(e){return e.id!==n.id}))),N("".concat(n.name," deleted")),setTimeout((function(){N(null)}),5e3)})).catch((function(e){alert("the person '".concat(n.name,"' was already deleted from server")),o(t.filter((function(e){return e.id!==n.id})))})))};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(h,{message:I}),Object(s.jsx)(j,{message:J}),Object(s.jsx)(d,{onChange:function(e){console.log(e.target.value),D(e.target.value)}}),Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={name:m,number:S};if(M(t,m)){if(window.confirm("".concat(m," is already added to phonebook, do you want to replace old number with new one??"))){var c=t.find((function(e){return e.name===m})),r=Object(a.a)(Object(a.a)({},c),{},{number:S});x(c.id,r).then((function(e){o(t.map((function(n){return n.id!==c.id?n:e}))),O(""),y(""),N("changed number for ".concat(m)),setTimeout((function(){N(null)}),5e3)})).catch((function(){A("Information of ".concat(m," has already been removed from server")),setTimeout((function(){A(null)}),5e3),o(t.filter((function(e){return e.name!==m})))}))}}else p(n).then((function(e){o(t.concat(e)),O(""),y(""),N("Added ".concat(m)),setTimeout((function(){N(null)}),5e3)})).catch((function(e){A(e.response.data.error),setTimeout((function(){A(null)}),5e3)}))},children:[Object(s.jsx)("h2",{children:" add a new"}),Object(s.jsx)(f,{name:m,onChange:function(e){console.log(e.target.value),O(e.target.value)}}),Object(s.jsx)(b,{number:S,onChange:function(e){console.log(e.target.value),y(e.target.value)}}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]}),Object(s.jsx)("h2",{children:"Numbers"}),t.filter((function(e){return e.name.toLowerCase().includes(P.toLowerCase())})).map((function(e){return Object(s.jsx)(l,{person:e,delPerson:q},e.name)}))]})},S=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,41)).then((function(n){var t=n.getCLS,c=n.getFID,o=n.getFCP,r=n.getLCP,u=n.getTTFB;t(e),c(e),o(e),r(e),u(e)}))};u.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(C,{})}),document.getElementById("root")),S()},7:function(e,n,t){}},[[40,1,2]]]);
//# sourceMappingURL=main.4c479ca7.chunk.js.map